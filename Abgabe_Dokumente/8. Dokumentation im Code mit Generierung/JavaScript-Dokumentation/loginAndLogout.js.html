<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: loginAndLogout.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: loginAndLogout.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Alle Funktion für den Login und Logout.
 */

/**
 * @function login
 * @description Meldet den Kunden an.
 */
function login() {
    var email = document.getElementsByName("email")[0].value;
    var pw = document.getElementsByName("password")[0].value;
    var ajax = new XMLHttpRequest();

    ajax.responseType = "json";
    ajax.open("POST", "CheckLogin?email=" + email + "&amp;pw=" + pw, true);
    ajax.send();
    ajax.onreadystatechange = function () {
        if (this.readyState === 4 &amp;&amp; this.status === 200) {
            console.log(ajax.response);
            if (ajax.response.find) {
                setCookie(ajax.response.kdnr);
                myItems();
                $('#login').modal('hide');
                isLoggedIn();
            } else {
                document.getElementsByClassName("modal-header")[0].innerHTML =
                        "&lt;button type='button' class='close' data-dismiss='modal'>&amp;times;&lt;/button>"
                        + "&lt;h4 class='modal-title'>Login&lt;/h4>"
                        + "&lt;br>&lt;div class='alert alert-danger'>Ihre E-Mail-Adresse oder Ihr Passwort ist falsch!&lt;/div>";
            }
        }
    };
}

/**
 * @function isLoggedIn
 * @description Überprüft, ob der Kunde angemeldet ist.
 */
function isLoggedIn() {
    if (document.cookie) {
        var parent = document.getElementsByClassName("navbar-right")[0];
        var child = document.getElementsByClassName("navbar-right")[0].getElementsByTagName("li")[1];
        parent.removeChild(child);
        parent.innerHTML +=
                "&lt;li class='dropdown'>"
                + "&lt;a class='dropdown-toggle' data-toggle='dropdown' href='#'>Mein Konto &lt;span class='caret'>&lt;/span>&lt;/a>"
                + "&lt;ul class='dropdown-menu'>"
                + "&lt;li>&lt;a href='javascript:void(0)' onclick='myItems()'>My2Hand&lt;/a>&lt;/li>"
                + "&lt;li>&lt;a href='javascript:void(0)' onclick='showUserProfile()'>Profil&lt;/a>&lt;/li>"
                + "&lt;li>&lt;a href='javascript:void(0)' onclick='logout()'>&lt;span class='glyphicon glyphicon-log-out'>&lt;/span> Logout&lt;/a>&lt;/li>"
                + "&lt;/ul>"
                + "&lt;/li>";
    }
}

/**
 * @function logout
 * @description Meldet den Kunden ab.
 */
function logout() {
    deleteCookie();
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#actionString">actionString</a></li><li><a href="global.html#addItemMail">addItemMail</a></li><li><a href="global.html#createFilter">createFilter</a></li><li><a href="global.html#createNewCustomer">createNewCustomer</a></li><li><a href="global.html#createNewItem">createNewItem</a></li><li><a href="global.html#deleteCookie">deleteCookie</a></li><li><a href="global.html#deleteCustomer">deleteCustomer</a></li><li><a href="global.html#deleteItem">deleteItem</a></li><li><a href="global.html#delItemMail">delItemMail</a></li><li><a href="global.html#filterArticles">filterArticles</a></li><li><a href="global.html#findItemsOfAllCustomers">findItemsOfAllCustomers</a></li><li><a href="global.html#findItemsOfPersonType">findItemsOfPersonType</a></li><li><a href="global.html#getCookie">getCookie</a></li><li><a href="global.html#isLoggedIn">isLoggedIn</a></li><li><a href="global.html#itemsCarousel">itemsCarousel</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#myItems">myItems</a></li><li><a href="global.html#saveItemsUpdates">saveItemsUpdates</a></li><li><a href="global.html#saveNewCustomer">saveNewCustomer</a></li><li><a href="global.html#saveUpdates">saveUpdates</a></li><li><a href="global.html#sendContactMail">sendContactMail</a></li><li><a href="global.html#sendMail">sendMail</a></li><li><a href="global.html#sendRegisterMail">sendRegisterMail</a></li><li><a href="global.html#setCookie">setCookie</a></li><li><a href="global.html#showImpressum">showImpressum</a></li><li><a href="global.html#showUserProfile">showUserProfile</a></li><li><a href="global.html#updateItem">updateItem</a></li><li><a href="global.html#updateProfile">updateProfile</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Fri Mar 31 2017 16:23:47 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
